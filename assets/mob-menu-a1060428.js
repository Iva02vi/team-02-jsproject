import{a as H,i as v}from"./vendor-8cce9181.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const j=document.querySelector(".modal-give-rating"),w=document.querySelector(".give-rating-form"),K=document.querySelector(".give-rating-close"),C=w.querySelector('button[type="submit"]'),Q=document.querySelector(".give-rating-p1"),I=document.querySelector(".backdrop"),U=document.querySelector(".modal-window"),W="https://energyflow.b.goit.study/api",b=document.querySelector(".give-rating-stars"),Y=5,z=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-Star-2",self.location);let g,h;const V=(i,a)=>{g=i.currentTarget.querySelector("input").value;const t=Array.from(a).slice(0,g),s=Array.from(a).slice(g);t.forEach(e=>e.classList.add("li-selected")),s.forEach(e=>e.classList.replace("li-selected","li-unselected"))},X=(i,a)=>{const t=i.currentTarget.querySelector("input").value,s=Array.from(a).slice(0,t),e=Array.from(a).slice(t);s.forEach(o=>o.classList.add("li-selected")),e.forEach(o=>o.classList.replace("li-selected","li-unselected"))},Z=async i=>{var a,t;C.disabled=!0,i.preventDefault();try{if(!g)throw Error("Please select rating! Make sure to click!");await H.patch(`${W}/exercises/${h}/rating`,{rate:+g,email:i.target.email.value,review:i.target.comment.value}),v.success({message:"Thank you for your review!",position:"topRight",icon:""}),w.reset(),_(),await k(h)}catch(s){v.error({message:((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||s.message,position:"topRight",icon:""})}finally{C.disabled=!1}return!1},ee=(i,a)=>{I.appendChild(j),I.classList.remove("visually-hidden"),U.style.display="none",b.innerHTML="",g=void 0,h=i,Q.innerHTML=a;const t=`
    <svg
      class="icon-Star-2"
      width="24"
      height="24"
      aria-label="modal rating star icon"
    >
      <use href="${z}"></use>
    </svg>`,s=[];for(let o=0;o<Y;o++){const n=document.createElement("li");n.classList.add("li-star");const c=document.createElement("label");c.innerHTML=t,c.style.pointerEvents="none";const l=document.createElement("input");l.setAttribute("type","checkbox"),l.style.display="none",l.setAttribute("value",`${o+1}`),n.append(c,l),s.push(n)}b.append(...s);const e=b.querySelectorAll("li");e.forEach(o=>{o.addEventListener("click",n=>V(n,e)),o.addEventListener("mouseover",n=>X(n,e))}),w.addEventListener("submit",Z)};K.addEventListener("click",async i=>{i.stopImmediatePropagation(),await k(h),_()});const _=()=>{j.classList.add("hidden"),U.style.display="block"},R=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-Star-1",self.location),S=document.querySelector(".backdrop");async function te(i){return S.classList.add("is-open"),k(i)}const se=document.querySelector(".modal-give-rating"),N=document.querySelector(".modal-btn-rating"),oe=document.querySelector(".modal-window");async function k(i){try{let c=function(r){r.stopImmediatePropagation(),r.preventDefault();let u=JSON.parse(localStorage.getItem("favorites"));u==null&&(u=[]);const T=u.findIndex(G=>G.name===t.name);T!==-1?(u.splice(T,1),o.innerText="Add to favorites",v.show({message:"Exercise removed from favorites",messageColor:"#f7f7fc",backgroundColor:"#3939db",position:"topRight"})):(u.push(t),o.innerText="Remove from favorites",v.show({message:"Exercise added to favorites",messageColor:"#f7f7fc",backgroundColor:"#219c2b",position:"topRight"})),localStorage.setItem("favorites",JSON.stringify(u))},d=function(){location.pathname.includes("/favorites.html")&&(console.log("favorites...."),P()),S.classList.remove("is-open"),e.removeEventListener("click",c),l.removeEventListener("click",d),document.removeEventListener("keydown",x),N.removeEventListener("click",M)},x=function(r){r.key==="Escape"&&d()};const t=(await H.get(`https://energyflow.b.goit.study/api/exercises/${i}`)).data;localStorage.setItem("exerciseModalData",JSON.stringify(t));const s=document.getElementsByClassName("modal-rating-stars")[0];s.innerHTML=t.rating;for(let r=1;r<=5;r++)r<t.rating?s.innerHTML+=`<li>

      <svg class="modal-rating-stars-svg" width="18" height="18">
        <use href=${R}></use>
      </svg>
    </li>`:s.innerHTML+=`<li>

        <svg class="modal-rating-stars-svg" width="18" height="18">
          <use href=${R}></use>
        </svg>
      </li>`;document.getElementsByClassName("imgGif")[0].src=t.gifUrl,document.getElementsByClassName("modal-title")[0].innerHTML=t.name,document.getElementsByClassName("modal-info-list-title-value")[0].innerHTML=t.target,document.getElementsByClassName("modal-info-list-title-value")[1].innerHTML=t.bodyPart,document.getElementsByClassName("modal-info-list-title-value")[2].innerHTML=t.equipment,document.getElementsByClassName("modal-info-list-title-value")[3].innerHTML=t.popularity,document.getElementsByClassName("modal-info-list-title-value")[4].innerHTML=t.burnedCalories,document.getElementsByClassName("descr")[0].innerHTML=t.description;const e=document.querySelector(".modal-btn-favorites"),o=document.querySelector(".modal-btn-favorites-text");let n=JSON.parse(localStorage.getItem("favorites"))||{};console.log("find",n.find(r=>r._id===t._id)),n.find(r=>r._id===t._id)?o.innerText="Remove from favorites":o.innerText="Add to favorites",e.addEventListener("click",c);const l=document.querySelector(".modal-btn-close");l.addEventListener("click",d);const M=r=>{S.classList.remove("visually-hidden"),oe.classList.add("hidden"),ee(i,JSON.parse(localStorage.getItem("exerciseModalData")).rating),se.classList.remove("hidden"),r.stopImmediatePropagation(),localStorage.removeItem("exerciseModalData")};N.addEventListener("click",M),document.addEventListener("keydown",x)}catch(a){v.error({message:a.message})}}const D=document.querySelector(".favorites-page-items-not-found"),f=document.querySelector(".favorites-page-items-gallery"),ie=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-arrow",self.location),ne=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-lighticon",self.location),ae=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-trash",self.location),y="favorites";let p=JSON.parse(localStorage.getItem(y));function E(i){i.style.display="none"}function re(i){i.style.display="flex"}function F(i){const a=i.reduce((t,s)=>t+`<li class="gallery-list-item">
                <div class="workout-box">
                    <div class="workout-header">
                        <div class="workout-header-wrap">
                            <span class="workout-title">WORKOUT</span>
                            <button type="button" class="delete-workout-btn" id="${s._id}">                            
                                <svg class="trash-icon" id="${s._id}" width="16" height="16" aria-label="trash-icon">
                                  <use href=${ae} id="${s._id}"></use>
                                </svg>
                            </button>
                        </div>
                        <div class="start-button-wrap">
                            <button type="button" class="start-button" id=${s._id}>Start
                                <svg class="start-arrow-icon" id=${s._id} width="14" height="14" aria-label="start-arrow">
                                  <use href=${ie}></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="workout-type">
                        <svg class="run-man-icon" width="24" height="24" aria-label="run-man">
                            <use href=${ne}></use>
                        </svg>
                        <h3 class="workout-name">${s.name}</h3>
                    </div>
                    <div class="workout-description">
                        <p class="description-item-name">Burned calories:
                            <span class="description-item-value">${s.burnedCalories} / ${s.time} min</span>
                        </p>
                        <p class="description-item-name">Body part:
                            <span class="description-item-value">${s.bodyPart}</span>
                        </p>
                        <p class="description-item-name">Target:
                            <span class="description-item-value">${s.target}</span>
                        </p>
                    </div>
                </div>
            </li>`,"");f.innerHTML=a,f.addEventListener("click",async t=>{let s;const e=t.target;console.log(e),e&&e.closest(".start-button")&&(s=e.closest(".start-button").getAttribute("id"),await te(s))}),f.addEventListener("click",t=>{if(t.target.className==="delete-workout-btn"){const s=localStorage.getItem(y),o=JSON.parse(s).filter(n=>n._id!==t.target.id);localStorage.setItem(y,JSON.stringify(o)),o.length===0?(E(f),re(D)):F(o)}})}const P=()=>{p=JSON.parse(localStorage.getItem(y))||{},!p||p.length===0?E(f):(E(D),F(p)),Math.ceil(p.length/3)},O=document.querySelector(".header-navigation-home"),B=document.querySelector(".header-navigation-favorites"),$=document.querySelector(".menu-list-link-home"),A=document.querySelector(".menu-list-link-favorites"),m=location.pathname;m==="/team-02-jsproject/index.html"||m==="/team-02-jsproject/"||m==="/index.html"||m==="/"?(B.classList.remove("is-active"),A.classList.remove("is-active"),O.classList.add("is-active"),$.classList.add("is-active")):(m==="/team-02-jsproject/favorites.html"||m==="/favorites.html")&&(P(),O.classList.remove("is-active"),$.classList.remove("is-active"),B.classList.add("is-active"),A.classList.add("is-active"));document.addEventListener("DOMContentLoaded",function(){const i="https://energyflow.b.goit.study/api/quote",a="quoteData",t=new Date().toISOString().split("T")[0],s=document.getElementById("quote"),e=JSON.parse(localStorage.getItem(a));e&&e.date===t?o(e.quote,e.author):fetch(i).then(n=>n.json()).then(n=>{const c=n.quote,l=n.author;o(c,l),localStorage.setItem(a,JSON.stringify({quote:c,author:l,date:t}))}).catch(n=>{console.error("Error fetching quote:",n),e&&o(e.quote,e.author)});function o(n,c){const l=s.querySelector(".quote-text"),d=s.querySelector(".quote-author");n.length<100&&(l.style.marginTop="30px",d.style.marginTop="15px"),l.textContent=n,d.textContent=c}});const J=document.querySelector(".mobile-menu"),L=document.querySelector(".header-burger"),le=document.querySelector(".menu-close-button"),ce=document.querySelectorAll(".social-links-link"),q=()=>{const i=L.getAttribute("aria-expanded")==="true"||!1;L.setAttribute("aria-expanded",!i),J.classList.toggle("is-open");const a=i?"enableBodyScroll":"disableBodyScroll";bodyScrollLock[a](document.body)};ce.forEach(i=>i.addEventListener("click",q));L.addEventListener("click",q);le.addEventListener("click",q);window.matchMedia("(min-width: 768px)").addEventListener("change",i=>{i.matches&&(J.classList.remove("is-open"),L.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))});export{te as o};
//# sourceMappingURL=mob-menu-a1060428.js.map
