import{a as A,i as E}from"./vendor-8cce9181.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const q=document.querySelector(".header-navigation-home"),k=document.querySelector(".header-navigation-favorites"),M=document.querySelector(".menu-list-link-home"),T=document.querySelector(".menu-list-link-favorites"),u=location.pathname;u==="/team-02-jsproject/index.html"||u==="/team-02-jsproject/"||u==="/index.html"||u==="/"?(k.classList.remove("is-active"),T.classList.remove("is-active"),q.classList.add("is-active"),M.classList.add("is-active")):(u==="/team-02-jsproject/favorites.html"||u==="/favorites.html")&&(q.classList.remove("is-active"),M.classList.remove("is-active"),k.classList.add("is-active"),T.classList.add("is-active"));document.addEventListener("DOMContentLoaded",function(){const s="https://energyflow.b.goit.study/api/quote",r="quoteData",o=new Date().toISOString().split("T")[0],n=document.getElementById("quote"),e=JSON.parse(localStorage.getItem(r));e&&e.date===o?t(e.quote,e.author):fetch(s).then(i=>i.json()).then(i=>{const l=i.quote,a=i.author;t(l,a),localStorage.setItem(r,JSON.stringify({quote:l,author:a,date:o}))}).catch(i=>{console.error("Error fetching quote:",i),e&&t(e.quote,e.author)});function t(i,l){const a=n.querySelector(".quote-text"),g=n.querySelector(".quote-author");i.length<100&&(a.style.marginTop="30px",g.style.marginTop="15px"),a.textContent=i,g.textContent=l}});const B=document.querySelector(".mobile-menu"),p=document.querySelector(".header-burger"),P=document.querySelector(".menu-close-button"),U=document.querySelectorAll(".social-links-link"),L=()=>{const s=p.getAttribute("aria-expanded")==="true"||!1;p.setAttribute("aria-expanded",!s),B.classList.toggle("is-open");const r=s?"enableBodyScroll":"disableBodyScroll";bodyScrollLock[r](document.body)};U.forEach(s=>s.addEventListener("click",L));p.addEventListener("click",L);P.addEventListener("click",L);window.matchMedia("(min-width: 768px)").addEventListener("change",s=>{s.matches&&(B.classList.remove("is-open"),p.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))});const H=document.querySelector(".modal-give-rating"),b=document.querySelector(".give-rating-form"),j=document.querySelector(".give-rating-close"),C=b.querySelector('button[type="submit"]'),$=document.querySelector(".give-rating-p1"),w=document.querySelector(".backdrop"),R=document.querySelector(".modal-window"),F="https://energyflow.b.goit.study/api",y=document.querySelector(".give-rating-stars"),_=5,G=new URL("/team-02-jsproject/assets/sprite-224c3807.svg#icon-Star-2",self.location);let m,v;const J=(s,r)=>{m=s.currentTarget.querySelector("input").value;const o=Array.from(r).slice(0,m),n=Array.from(r).slice(m);o.forEach(e=>e.classList.add("li-selected")),n.forEach(e=>e.classList.replace("li-selected","li-unselected"))},z=(s,r)=>{const o=s.currentTarget.querySelector("input").value,n=Array.from(r).slice(0,o),e=Array.from(r).slice(o);n.forEach(t=>t.classList.add("li-selected")),e.forEach(t=>t.classList.replace("li-selected","li-unselected"))},K=async s=>{var r,o;C.disabled=!0,s.preventDefault();try{if(!m)throw Error("Please select rating! Make sure to click!");await A.patch(`${F}/exercises/${v}/rating`,{rate:+m,email:s.target.email.value,review:s.target.comment.value}),E.success({message:"Thank you for your review!",position:"topRight",icon:""}),b.reset(),I(),await N(v)}catch(n){E.error({message:((o=(r=n.response)==null?void 0:r.data)==null?void 0:o.message)||n.message,position:"topRight",icon:""})}finally{C.disabled=!1}return!1},Q=(s,r)=>{w.appendChild(H),w.classList.remove("visually-hidden"),R.style.display="none",y.innerHTML="",m=void 0,v=s,$.innerHTML=r;const o=`
    <svg
      class="icon-Star-2"
      width="24"
      height="24"
      aria-label="modal rating star icon"
    >
      <use href="${G}"></use>
    </svg>`,n=[];for(let t=0;t<_;t++){const i=document.createElement("li");i.classList.add("li-star");const l=document.createElement("label");l.innerHTML=o,l.style.pointerEvents="none";const a=document.createElement("input");a.setAttribute("type","checkbox"),a.style.display="none",a.setAttribute("value",`${t+1}`),i.append(l,a),n.push(i)}y.append(...n);const e=y.querySelectorAll("li");e.forEach(t=>{t.addEventListener("click",i=>J(i,e)),t.addEventListener("mouseover",i=>z(i,e))}),b.addEventListener("submit",K)};j.addEventListener("click",s=>{N(v),I(),s.stopImmediatePropagation()});const I=()=>{H.classList.add("hidden"),R.style.display="block"},Y=document.querySelector(".modal-give-rating"),V=document.querySelector(".modal-btns"),x=document.querySelector(".modal-window"),h=document.querySelector(".backdrop");async function N(s){try{let i=function(c){c.stopPropagation(),c.preventDefault();let d=JSON.parse(localStorage.getItem("favorites"));d==null&&(d=[]);const S=d.findIndex(D=>D.name===o.name);S!==-1?(d.splice(S,1),t.innerText="Add to favorites",iziToast.show({message:"Упражнение удалено из избранного",messageColor:"#f7f7fc",backgroundColor:"#3939db",position:"topRight"})):(d.push(o),t.innerText="Remove from favorites",iziToast.show({message:"Упражнение добавлено в избранное",messageColor:"#f7f7fc",backgroundColor:"#219c2b",position:"topRight"})),localStorage.setItem("favorites",JSON.stringify(d))},a=function(){x.innerHTML="",h.classList.remove("is-open"),t.removeEventListener("click",i),l.removeEventListener("click",a),document.removeEventListener("keydown",g),h.removeEventListener("click",O),n.removeEventListener("click",f)},g=function(c){c.key==="Escape"&&a()},O=function(){a()};const o=(await A.get(`https://energyflow.b.goit.study/api/exercises/${s}`)).data;console.log(o),document.querySelectorAll(".modal-btn-rating").length>0&&document.querySelectorAll(".modal-btn-rating").forEach(c=>c.remove());const n=document.createElement("button");n.setAttribute("class","modal-btn-rating"),n.setAttribute("id",crypto.randomUUID()),n.textContent="Give a rating",V.appendChild(n);const e=document.getElementsByClassName("modal-rating-stars")[0];e.innerHTML=o.rating;for(let c=1;c<=5;c++)c<o.rating?e.innerHTML+=`<li>
      
      <svg class="modal-rating-stars-svg" width="18" height="18">
        <use href="../img/sprite.svg#icon-Star-1"></use>
      </svg>
    </li>`:e.innerHTML+=`<li>
        
        <svg class="modal-rating-stars-svg" width="18" height="18">
          <use href="../img/sprite.svg#icon-Star-1"></use>
        </svg>
      </li>`;document.getElementsByClassName("imgGif")[0].src=o.gifUrl,document.getElementsByClassName("modal-title")[0].innerHTML=o.name,document.getElementsByClassName("modal-info-list-title-value")[0].innerHTML=o.target,document.getElementsByClassName("modal-info-list-title-value")[1].innerHTML=o.bodyPart,document.getElementsByClassName("modal-info-list-title-value")[2].innerHTML=o.equipment,document.getElementsByClassName("modal-info-list-title-value")[3].innerHTML=o.popularity,document.getElementsByClassName("modal-info-list-title-value")[4].innerHTML=o.burnedCalories,document.getElementsByClassName("descr")[0].innerHTML=o.description;const t=document.querySelector(".modal-btn-favorites");t.addEventListener("click",i);const l=document.querySelector(".modal-btn-close");l.addEventListener("click",a);const f=c=>{h.classList.remove("visually-hidden"),x.classList.add("hidden"),Q(s,o.rating),Y.classList.remove("hidden"),c.stopImmediatePropagation(),n.removeEventListener("click",f),n.remove()};n.addEventListener("click",f),document.addEventListener("keydown",g)}catch{}}
//# sourceMappingURL=modal-window-exercise-1da8ab07.js.map
