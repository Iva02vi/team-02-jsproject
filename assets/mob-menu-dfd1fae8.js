import{a as _,i as v}from"./vendor-8cce9181.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();const U=document.querySelector(".modal-give-rating"),k=document.querySelector(".give-rating-form"),Q=document.querySelector(".give-rating-close"),N=k.querySelector('button[type="submit"]'),Y=document.querySelector(".give-rating-p1"),I=document.querySelector(".backdrop"),D=document.querySelector(".modal-window"),b=document.querySelector(".give-rating-stars"),V="https://energyflow.b.goit.study/api",X=5,Z=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-Star-2",self.location);let f,h;const ee=(t,i)=>{f=t.currentTarget.querySelector("input").value,F(i)},te=(t,i)=>{F(i)},F=t=>{const i=event.currentTarget.querySelector("input").value;t.forEach((s,o)=>{const e=o<i;s.classList.toggle("li-selected",e),s.classList.toggle("li-unselected",!e)})},se=async t=>{var i,s;N.disabled=!0,t.preventDefault();try{if(!f)throw Error("Please select rating! Make sure to click!");await _.patch(`${V}/exercises/${h}/rating`,{rate:+f,email:t.target.email.value,review:t.target.comment.value}),v.success({message:"Thank you for your review!",position:"topRight",icon:""}),k.reset(),P(),await q(h)}catch(o){v.error({message:((s=(i=o.response)==null?void 0:i.data)==null?void 0:s.message)||o.message,position:"topRight",icon:""})}finally{N.disabled=!1}return!1},oe=(t,i)=>{I.appendChild(U),I.classList.remove("visually-hidden"),D.style.display="none",b.innerHTML="",f=void 0,h=t,Y.innerHTML=i;const s=`
    <svg
      class="icon-Star-2"
      width="24"
      height="24"
      aria-label="modal rating star icon"
    >
      <use href="${Z}"></use>
    </svg>`,o=Array.from({length:X},(n,r)=>{const c=document.createElement("li");c.classList.add("li-star");const a=document.createElement("label");a.innerHTML=s,a.style.pointerEvents="none";const d=document.createElement("input");return d.setAttribute("type","checkbox"),d.style.display="none",d.setAttribute("value",`${r+1}`),c.append(a,d),c});b.append(...o);const e=b.querySelectorAll("li");e.forEach(n=>{n.addEventListener("click",r=>ee(r,e)),n.addEventListener("mouseover",r=>te(r,e))}),k.addEventListener("submit",se)};Q.addEventListener("click",async t=>{t.stopImmediatePropagation(),await q(h),P()});const P=()=>{U.classList.add("hidden"),D.style.display="block"},O=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-Star-1",self.location),w=document.querySelector(".backdrop");async function ne(t){return w.classList.add("is-open"),q(t)}const ie=document.querySelector(".modal-give-rating"),B=document.querySelector(".modal-btn-rating"),re=document.querySelector(".modal-window");async function q(t){try{let a=function(l){l.stopImmediatePropagation(),l.preventDefault();let p=JSON.parse(localStorage.getItem("favorites"))||[];const R=p.findIndex(W=>W._id===s._id);R!==-1?(p.splice(R,1),n.innerText="Add to favorites",v.show({message:"Exercise removed from favorites",messageColor:"var(--black)",backgroundColor:"var(--dark-gray)",position:"topRight",zindex:9999999999})):(p.push(s),n.innerText="Remove from favorites",v.show({message:"Exercise added to favorites",messageColor:"var(--white-smoke)",backgroundColor:"var(--dark-gray)",position:"topRight",zindex:9999999999})),localStorage.setItem("favorites",JSON.stringify(p))},L=function(){location.pathname.includes("/favorites.html")&&(console.log("favorites...."),z()),w.classList.remove("is-open"),e.removeEventListener("click",a),d.removeEventListener("click",L),document.removeEventListener("keydown",T),B.removeEventListener("click",C)},T=function(l){l.key==="Escape"&&L()};const s=(await _.get(`https://energyflow.b.goit.study/api/exercises/${t}`)).data;localStorage.setItem("exerciseModalData",JSON.stringify(s));const o=document.getElementsByClassName("modal-rating-stars")[0];o.innerHTML=s.rating;for(let l=1;l<=5;l++)l<s.rating?o.innerHTML+=`<li>
          <svg class="modal-rating-stars-svg" width="18" height="18">
            <use href=${O}></use>
          </svg>
        </li>`:o.innerHTML+=`<li>
          <svg class="modal-rating-stars-svg" width="18" height="18">
            <use href=${O}></use>
          </svg>
        </li>`;document.getElementsByClassName("imgGif")[0].src=s.gifUrl,document.getElementsByClassName("modal-title")[0].innerHTML=s.name,document.getElementsByClassName("modal-info-list-title-value")[0].innerHTML=s.target,document.getElementsByClassName("modal-info-list-title-value")[1].innerHTML=s.bodyPart,document.getElementsByClassName("modal-info-list-title-value")[2].innerHTML=s.equipment,document.getElementsByClassName("modal-info-list-title-value")[3].innerHTML=s.popularity,document.getElementsByClassName("modal-info-list-title-value")[4].innerHTML=s.burnedCalories,document.getElementsByClassName("descr")[0].innerHTML=s.description;const e=document.querySelector(".modal-btn-favorites"),n=document.querySelector(".modal-btn-favorites-text"),c=(JSON.parse(localStorage.getItem("favorites"))||[]).findIndex(l=>l._id===s._id);console.log("find",c),c!==-1?n.innerText="Remove from favorites":n.innerText="Add to favorites",e.addEventListener("click",a);const d=document.querySelector(".modal-btn-close");d.addEventListener("click",L);const C=l=>{w.classList.remove("visually-hidden"),re.classList.add("hidden"),oe(t,JSON.parse(localStorage.getItem("exerciseModalData")).rating),ie.classList.remove("hidden"),l.stopImmediatePropagation(),localStorage.removeItem("exerciseModalData")};B.addEventListener("click",C),document.addEventListener("keydown",T)}catch(i){v.error({message:i.message,zindex:9999999999})}}const J=document.querySelector(".favorites-page-items-not-found"),u=document.querySelector(".favorites-page-items-gallery"),ae=document.querySelector(".favorites-mobile-pagination"),le=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-arrow",self.location),ce=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-lighticon",self.location),de=new URL("/team-02-jsproject/assets/sprite-7048d1fb.svg#icon-trash",self.location),y="favorites";let m=JSON.parse(localStorage.getItem(y));function E(t){t&&(t.style.display="none")}function G(t){t&&(t.style.display="flex")}window.innerWidth<768&&G(ae);function x(t){if(!u)return;u.innerHTML="";const i=t.reduce((s,o)=>{const e=ue(o.name);return s+`<li class="gallery-list-item">
            <div class="workout-box">
                    <div class="workout-header">
                        <div class="workout-header-wrap">
                            <span class="workout-title">WORKOUT</span>
                            <button type="button" class="delete-workout-btn" id="${o._id}">                            
                                <svg class="trash-icon" id="${o._id}" width="16" height="16" aria-label="trash-icon">
                                  <use href=${de} id="${o._id}"></use>
                                </svg>
                            </button>
                        </div>
                        <div class="start-button-wrap">
                            <button type="button" class="start-button-item" id=${o._id}>Start
                                <svg class="start-arrow-icon" id=${o._id} width="14" height="14" aria-label="start-arrow">
                                  <use href=${le}></use>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="workout-type">
                        <svg class="run-man-icon" width="24" height="24" aria-label="run-man">
                            <use href=${ce}></use>
                        </svg>
                        <h3 class="workout-name">${e}</h3>
                    </div>
                    <div class="workout-description">
                        <p class="description-item-name">Burned calories:
                            <span class="description-item-value">${o.burnedCalories} / ${o.time} min</span>
                        </p>
                        <p class="description-item-name">Body part:
                            <span class="description-item-value">${o.bodyPart}</span>
                        </p>
                        <p class="description-item-name">Target:
                            <span class="description-item-value">${o.target}</span>
                        </p>
                    </div>
                </div>
        </li>`},"");u.innerHTML=i,u.addEventListener("click",async s=>{let o;const e=s.target;e&&e.closest(".start-button-item")&&(o=e.closest(".start-button-item").getAttribute("id"),await ne(o))}),u.addEventListener("click",s=>{if(s.target.className==="delete-workout-btn"){const o=localStorage.getItem(y),n=JSON.parse(o).filter(r=>r._id!==s.target.id);localStorage.setItem(y,JSON.stringify(n)),n.length===0?(E(u),G(J)):x(n)}})}const z=()=>{m=JSON.parse(localStorage.getItem(y))||{},!m||m.length===0?E(u):(E(J),x(m)),Math.ceil(m.length/3),x(m)};function ue(t){const i=document.documentElement.clientWidth;let s=20,o=295,e=.7;i>=1440?(s=24,o=424,e=.85):i>=768&&(s=24,o=313,e=.8);const n=o/(s/2)*e;return t.length>n?t.slice(0,n)+"...":t}const $=document.querySelector(".header-navigation-home"),H=document.querySelector(".header-navigation-favorites"),A=document.querySelector(".menu-list-link-home"),j=document.querySelector(".menu-list-link-favorites"),g=location.pathname;g==="/team-02-jsproject/index.html"||g==="/team-02-jsproject/"||g==="/index.html"||g==="/"?(H.classList.remove("is-active"),j.classList.remove("is-active"),$.classList.add("is-active"),A.classList.add("is-active")):(g==="/team-02-jsproject/favorites.html"||g==="/favorites.html")&&(z(),$.classList.remove("is-active"),A.classList.remove("is-active"),H.classList.add("is-active"),j.classList.add("is-active"));document.addEventListener("DOMContentLoaded",function(){const t="https://energyflow.b.goit.study/api/quote",i="quoteData",s=new Date().toISOString().split("T")[0],o=document.getElementById("quote"),e=JSON.parse(localStorage.getItem(i));e&&e.date===s?n(e.quote,e.author):fetch(t).then(r=>r.json()).then(r=>{const c=r.quote,a=r.author;n(c,a),localStorage.setItem(i,JSON.stringify({quote:c,author:a,date:s}))}).catch(r=>{console.error("Error fetching quote:",r),e&&n(e.quote,e.author)});function n(r,c){const a=o.querySelector(".quote-text"),d=o.querySelector(".quote-author");r.length<100&&(a.style.marginTop="30px",d.style.marginTop="15px"),a.textContent=r,d.textContent=c}});const K=document.querySelector(".mobile-menu"),S=document.querySelector(".header-burger"),me=document.querySelector(".menu-close-button"),ge=document.querySelectorAll(".social-links-link"),M=()=>{const t=S.getAttribute("aria-expanded")==="true"||!1;S.setAttribute("aria-expanded",!t),K.classList.toggle("is-open");const i=t?"enableBodyScroll":"disableBodyScroll";bodyScrollLock[i](document.body)};ge.forEach(t=>t.addEventListener("click",M));S.addEventListener("click",M);me.addEventListener("click",M);window.matchMedia("(min-width: 768px)").addEventListener("change",t=>{t.matches&&(K.classList.remove("is-open"),S.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))});export{ne as o};
//# sourceMappingURL=mob-menu-dfd1fae8.js.map
